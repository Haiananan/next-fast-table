# NEXT-FAST-TABLE

ğŸ¦„ ä¸€åˆ†é’Ÿåˆ¶ä½œä½ çš„è¡¨æ ¼ç¨‹åº

![Image](./public/image.png)

## ç›®å½•

1. [ä»‹ç»](#ä»‹ç»)
2. [åŠŸèƒ½ç‰¹ç‚¹](#åŠŸèƒ½ç‰¹ç‚¹)
3. [åœ¨çº¿æ¼”ç¤º](#åœ¨çº¿æ¼”ç¤º)
4. [å®‰è£…](#å®‰è£…)
5. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
   - [åˆ›å»º API ç¨‹åº](#åˆ›å»º-api-ç¨‹åº)
   - [å®šä¹‰åˆ—å¹¶åœ¨é¡µé¢ä¸­ä½¿ç”¨](#å®šä¹‰åˆ—å¹¶åœ¨é¡µé¢ä¸­ä½¿ç”¨)
6. [é…ç½®é€‰é¡¹](#é…ç½®é€‰é¡¹)
   - [HelperConfig](#helperconfig)
   - [TableConfig](#tableconfig)
7. [ç±»å‹](#ç±»å‹)
8. [å®Œæ•´æ¡ˆä¾‹](#å®Œæ•´æ¡ˆä¾‹)
9. [FAQ](#FAQ)
10. [è´¡çŒ®å’Œæ”¯æŒ](#è´¡çŒ®å’Œæ”¯æŒ)
11. [License](#license)

## ä»‹ç»

**NEXT-FAST-TABLE** æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”é«˜æ•ˆçš„è¡¨æ ¼ç»„ä»¶ï¼Œä¸“ä¸ºä½¿ç”¨ Next.js çš„å¼€å‘è€…è®¾è®¡ã€‚å®ƒç®€åŒ–äº†å¤æ‚æ•°æ®å±•ç¤ºçš„è¿‡ç¨‹ï¼Œä½¿æ‚¨èƒ½å¤Ÿåœ¨ä¸€åˆ†é’Ÿå†…å¿«é€Ÿåˆ›å»ºå’Œé›†æˆè¡¨æ ¼åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- **ğŸ”¥ æ˜“äºä½¿ç”¨**ï¼šåˆ©ç”¨ Server Actionï¼Œæ— éœ€å®šä¹‰æ¥å£ï¼Œç›´æ¥å¤„ç†æ•°æ®ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ fetch è¯·æ±‚ã€‚
- **â­ï¸ é¢„è®¾ä¸°å¯Œ**ï¼šåªéœ€è°ƒç”¨ Fields.string()ç­‰æ–¹æ³•ï¼Œå³å¯ç”Ÿæˆè¡¨å•
- **ğŸ”§ é«˜åº¦å¯å®šåˆ¶**ï¼šæ”¯æŒå¤šç§é…ç½®é€‰é¡¹å’Œæ ·å¼è‡ªå®šä¹‰ï¼Œæ»¡è¶³ä¸åŒåº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚
- **ğŸ“± å“åº”å¼è®¾è®¡**ï¼šè‡ªåŠ¨é€‚é…å„ç§å±å¹•å°ºå¯¸ï¼Œæä¾›æœ€ä½³ç”¨æˆ·ä½“éªŒã€‚
- **âš™ï¸ é«˜çº§æ•°æ®å¤„ç†**ï¼šå†…ç½®æ’åºã€ç­›é€‰ã€åˆ†é¡µã€æ¨¡ç³Šæœç´¢ç­‰åŠŸèƒ½ï¼Œä¸€é”®å®ç°ã€‚
- **ğŸ“Š æ•°æ®ç§ç±»é½å…¨**ï¼šæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€æ•°å­—ã€æ—¥æœŸã€å›¾ç‰‡ç­‰ã€‚æ­¤å¤–ï¼Œè¿˜æ”¯æŒ JSON å’Œ Array

## åœ¨çº¿æ¼”ç¤º

<a href="https://next-fast-table.vercel.app" target="_blank" style="display: inline-block; background-color: #2563eb; color: white; padding: 10px 20px; text-align: center; text-decoration: none; border-radius: 5px; font-size: 12px; font-weight: bold;">
  DEMO
</a>

## å®‰è£…

ä½¿ç”¨ä½ å–œæ¬¢çš„åŒ…ç®¡ç†å™¨è½»æ¾å®‰è£… NEXT-FAST-TABLEï¼š

```bash
npm install next-fast-table
```

æˆ–

```bash
yarn add next-fast-table
```

æˆ–

```bash
pnpm install next-fast-table
```

## å¿«é€Ÿå¼€å§‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ Next.js åº”ç”¨ä¸­ä½¿ç”¨ NEXT-FAST-TABLE

> æ³¨æ„ï¼šè¿™åªæ˜¯ä¸€ä¸ªæœ€å°ç¤ºä¾‹ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å¯ä»¥å‚è€ƒæœ¬é¡¹ç›®çš„å®Œæ•´æ¡ˆä¾‹ã€‚

### åˆ›å»º API ç¨‹åº

```typescript
"use server";
import {
  FetchParams,
  CreateParams,
  DeleteParams,
  UpdateParams,
} from "next-fast-table";

// æ¨¡æ‹Ÿæ•°æ®åº“
let payments = [
  {
    id: 1,
    username: "John Doe",
    email: "john@example.com",
  },
  {
    id: 2,
    username: "Jane Smith",
    email: "jane@example.com",
  },
  {
    id: 3,
    username: "Alice",
    email: "alice@example.com",
  },
];

type Payment = {
  id: number;
  username: string;
  email: string;
};

// è·å–æ•°æ®
export async function onFetch(obj: FetchParams) {
  const pageSize = obj.pagination?.pageSize ?? 10;
  const pageIndex = obj.pagination?.pageIndex ?? 0;

  // æ¨¡æ‹Ÿæ’åº
  const sortedPayments = payments.sort((a, b) => {
    if (!obj.sorting || obj.sorting.length === 0) return 0;
    const sort = obj.sorting[0];
    const multiplier = sort.desc ? -1 : 1;
    if (a[sort.id] < b[sort.id]) return -1 * multiplier;
    if (a[sort.id] > b[sort.id]) return 1 * multiplier;
    return 0;
  });

  // æ¨¡æ‹Ÿè¿‡æ»¤
  const filteredPayments = sortedPayments.filter((payment) => {
    if (!obj.columnFilters || obj.columnFilters.length === 0) return true;
    return obj.columnFilters.every((filter) => {
      if (
        typeof filter.value === "number" ||
        typeof filter.value === "boolean"
      ) {
        return payment[filter.id] === filter.value;
      } else if (typeof filter.value === "string") {
        return payment[filter.id].includes(filter.value);
      }
      return false;
    });
  });

  const total = filteredPayments.length;
  const list = filteredPayments.slice(
    pageIndex * pageSize,
    (pageIndex + 1) * pageSize
  );

  return {
    list,
    total,
  };
}

// åˆ›å»ºæ•°æ®
export async function onCreate(data: CreateParams<Payment>) {
  payments.push(data as any);
}

// åˆ é™¤æ•°æ®
export async function onDelete(data: DeleteParams<number>) {
  const idsToDelete = [data].flat().map((d) => d.id);
  payments = payments.filter((payment) => !idsToDelete.includes(payment.id));
}

// æ›´æ–°æ•°æ®
export async function onUpdate(data: UpdateParams<Payment>) {
  payments = payments.map((payment) =>
    payment.id === data.id ? { ...payment, ...data } : payment
  );
}
```

### å®šä¹‰åˆ—å¹¶åœ¨é¡µé¢ä¸­ä½¿ç”¨

```typescript
"use client";
import { NextFastTable, Fields } from "next-fast-table";
import { onCreate, onDelete, onFetch, onUpdate } from "YourAPIFile";

export default function DemoPage() {
  const field = Fields;

  const columns = [
    field.number("id"),
    field.string("username"),
    field.email("email"),
  ];

  return (
    <NextFastTable
      columns={columns}
      onFetch={onFetch}
      onDelete={onDelete}
      onCreate={onCreate}
      onUpdate={onUpdate}
    />
  );
}
```

## HelperConfig

è¿™æ˜¯ä¸€ä¸ªç”¨äºæ§åˆ¶å‰ç«¯è¡¨æ ¼æ¸²æŸ“çš„é…ç½®é€‰é¡¹ã€‚å®ƒæä¾›äº†å¤šç§é€‰é¡¹æ¥æ§åˆ¶è¡¨æ ¼çš„è¡Œä¸ºå’Œæ•°æ®æ“ä½œã€‚

### é…ç½®é€‰é¡¹

- **input**
  - `disabled`: åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹ï¼ˆåŒ…æ‹¬åˆ›å»ºå’Œç¼–è¾‘ï¼‰è¾“å…¥æ˜¯å¦ç¦ç”¨ã€‚é»˜è®¤å€¼ä¸º `false`ã€‚
  - `required`: åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹è¾“å…¥æ˜¯å¦å¿…å¡«ï¼Œå‚ä¸è¡¨å•éªŒè¯ã€‚é»˜è®¤å€¼ä¸º `false`ã€‚
- **list**
  - `hidden`: åˆ—æ˜¯å¦é»˜è®¤éšè—ã€‚å¦‚æœä¸º `true`ï¼Œåˆ™é»˜è®¤ä¸æ˜¾ç¤ºï¼Œä½†å¯ä»¥é€šè¿‡åˆ—è®¾ç½®æ˜¾ç¤ºã€‚é»˜è®¤å€¼ä¸º `false`ã€‚
- **å…¶ä»–é€‰é¡¹**
  - `label`: åˆ—çš„æ ‡ç­¾æˆ–åˆ«åã€‚é»˜è®¤å€¼ä¸º `undefined`ã€‚
  - `enableHiding`: æ˜¯å¦å…è®¸éšè—ã€‚å¦‚æœä¸º `false`ï¼Œåˆ™ä¸æ˜¾ç¤ºéšè—æŒ‰é’®ã€‚é»˜è®¤å€¼ä¸º `true`ã€‚
  - `enableSorting`: æ˜¯å¦å…è®¸æ’åºã€‚å¦‚æœä¸º `false`ï¼Œåˆ™ä¸æ˜¾ç¤ºæ’åºæŒ‰é’®ã€‚é»˜è®¤å€¼ä¸º `true`ã€‚
  - `enableColumnFilter`: åˆ—æ˜¯å¦å‚ä¸åˆ—è¿‡æ»¤ã€‚å¦‚æœä¸º `false`ï¼Œåˆ™ä¸æ˜¾ç¤ºåœ¨åˆ—è¿‡æ»¤ä¸­ã€‚é»˜è®¤å€¼ä¸º `true`ã€‚
  - `enum`: æšä¸¾å€¼ï¼Œä»…åœ¨ä½¿ç”¨ `field.enum` æ—¶æœ‰æ•ˆã€‚é»˜è®¤å€¼ä¸º `[]`ã€‚
  - `render`: ç”¨äºåœ¨æ˜¾ç¤ºçŠ¶æ€ä¸‹è‡ªå®šä¹‰æ¸²æŸ“çš„è‡ªå®šä¹‰æ¸²æŸ“å‡½æ•°ã€‚
    - å‚æ•°:
      - `cell`: å•å…ƒæ ¼çš„å€¼ã€‚
      - `row`: è¡Œæ•°æ®ã€‚
    - è¿”å›å€¼: ç”¨äºæ¸²æŸ“çš„ JSX å…ƒç´ æˆ–å­—ç¬¦ä¸²ã€‚

## TableConfig

`TableConfig` æ˜¯ NextFastTable ç»„ä»¶çš„ä¼ å‚ç±»å‹ï¼Œå…¶ä¸­ `columns` å’Œ `onFetch` æ˜¯å¿…å¡«çš„ã€‚

### é…ç½®é€‰é¡¹

- **name**
  - **æè¿°**: è¡¨æ ¼çš„åç§°ï¼Œç”¨äºç”Ÿæˆ `tanstack-query` çš„é”®ã€‚
  - **é»˜è®¤å€¼**: `'next-table'`
- **columns**
  - **æè¿°**: è¡¨æ ¼çš„åˆ—é…ç½®ã€‚
  - **å¿…å¡«**: æ˜¯
- **onFetch**
  - **æè¿°**: ç”¨äºè·å–è¡¨æ ¼æ•°æ®çš„å‡½æ•°ã€‚
  - **å‚æ•°**:
    - `args`: åŒ…å«åˆ†é¡µã€æ’åºå’Œåˆ—è¿‡æ»¤å™¨çš„å¯¹è±¡ã€‚
  - **è¿”å›å€¼**: ä¸€ä¸ªåŒ…å«æ€»é¡¹ç›®æ•°å’Œæ•°æ®åˆ—è¡¨ï¼ˆå¸¦ IDï¼‰çš„ Promiseã€‚
  - **ç¤ºä¾‹**:
    ```javascript
    async function fetchData({ pagination, sorting, columnFilters }) {
      const data = await fetchDataFromAPI({
        pagination,
        sorting,
        columnFilters,
      });
      const total = await fetchTotalCount();
      return {
        list: data,
        total,
      };
    }
    ```
- **onDelete**
  - **æè¿°**: ç”¨äºåˆ é™¤æ•°æ®çš„å‡½æ•°ã€‚
  - **å¯é€‰**: æ˜¯
  - **å‚æ•°**:
    - `data`: è¦åˆ é™¤çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯å•ä¸ª ID æˆ– ID æ•°ç»„ã€‚
  - **è¿”å›å€¼**: ä¸€ä¸ªåœ¨åˆ é™¤å®Œæˆæ—¶è§£æçš„ Promiseã€‚
  - **ç¤ºä¾‹**:
    ```javascript
    async function deleteData(data) {
      await deleteDataFromAPI(data);
    }
    ```
- **onCreate**
  - **æè¿°**: ç”¨äºåˆ›å»ºæ–°æ•°æ®çš„å‡½æ•°ã€‚
  - **å¯é€‰**: æ˜¯
  - **å‚æ•°**:
    - `data`: è¦åˆ›å»ºçš„æ•°æ®ã€‚
  - **è¿”å›å€¼**: ä¸€ä¸ªåœ¨åˆ›å»ºå®Œæˆæ—¶è§£æçš„ Promiseã€‚
  - **ç¤ºä¾‹**:
    ```javascript
    async function createData(data) {
      const newData = await createDataInAPI(data);
      return newData;
    }
    ```
- **onUpdate**
  - **æè¿°**: ç”¨äºæ›´æ–°ç°æœ‰æ•°æ®çš„å‡½æ•°ã€‚
  - **å¯é€‰**: æ˜¯
  - **å‚æ•°**:
    - `data`: è¦æ›´æ–°çš„æ•°æ®ã€‚ä»…å‘é€ ID å’Œè¦æ›´æ–°çš„å­—æ®µã€‚
  - **è¿”å›å€¼**: ä¸€ä¸ªåœ¨æ›´æ–°å®Œæˆæ—¶è§£æçš„ Promiseã€‚
  - **ç¤ºä¾‹**:
    ```javascript
    async function updateData(data) {
      const updatedData = await updateDataInAPI(data);
      return updatedData;
    }
    ```

## ç±»å‹

```typescript
type DataWithID<T = Record<string, any>> = {
  id: number | string;
} & Partial<T>;

type DataOnlyId<T = number | string> = {
  id: T;
};

export type FetchParams = {
  pagination?: { pageSize: number; pageIndex: number };
  sorting?: { id: string; desc: boolean }[];
  columnFilters?: { id: string; value: any }[];
};

export type DeleteParams<T> = DataOnlyId<T> | DataOnlyId<T>[];

export type UpdateParams<T = Record<string, any>> = DataWithID<T>;

export type CreateParams<T = Record<string, any>> = DataWithID<T>;
```

## å®Œæ•´æ¡ˆä¾‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªæœ€å°åŒ–çš„ Next.js åº”ç”¨ï¼Œç”¨äºæ¼”ç¤º NEXT-FAST-TABLE çš„åŸºæœ¬ç”¨æ³•ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤åœ¨æœ¬åœ°è¿è¡Œè¯¥é¡¹ç›®ã€‚è¯¥é¡¹ç›®ä½¿ç”¨ sqlite æ•°æ®åº“ï¼Œæ•°æ®å­˜å‚¨åœ¨ `prisma/data.db` æ–‡ä»¶ä¸­ã€‚

```bash
git clone https://github.com/Haiananan/next-fast-table.git
npm install
npm run dev
```

## FAQ

### è¿™æ˜¯ä¸€ä¸ªåå°ç®¡ç†æ¨¡æ¿å—ï¼Ÿ

ä¸ã€‚NEXT-FAST-TABLE æ˜¯ä¸€ä¸ªè¡¨æ ¼ç»„ä»¶ï¼Œç”¨äºå±•ç¤ºæ•°æ®ã€‚å®ƒä¸åŒ…å«ä»»ä½•åå°ç®¡ç†æ¨¡æ¿ã€‚å®ƒæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºè¡¨æ ¼é¡µé¢ï¼Œè€Œä¸æ˜¯ä¸€å¥—å®Œæ•´çš„åå°ç®¡ç†ç³»ç»Ÿã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© NEXT-FAST-TABLEï¼Ÿ

NEXT-FAST-TABLE æ˜¯ä¸€ä¸ªé«˜æ•ˆä¸”æ˜“äºä½¿ç”¨çš„è¡¨æ ¼ç»„ä»¶ï¼Œä¸“ä¸º Next.js å¼€å‘è€…è®¾è®¡ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„é…ç½®é€‰é¡¹å’Œæ•°æ®æ“ä½œæ–¹æ³•ï¼Œä½¿æ‚¨èƒ½å¤Ÿå¿«é€Ÿåˆ›å»ºå’Œé›†æˆè¡¨æ ¼åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ã€‚å¾—ç›Šäºå¤©ç„¶çš„ Server Actionï¼Œæ‚¨æ— éœ€å®šä¹‰æ¥å£ï¼Œå¯ä»¥ç›´æ¥å¤„ç†æ•°æ®ã€‚

### åªèƒ½ä½¿ç”¨ Server Action å—ï¼Ÿ

ä¸æ˜¯çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•æ–¹å¼ï¼ˆaxios,fetch...ï¼‰è·å–æ•°æ®ï¼Œåªè¦ä¿è¯ä»¥è§„å®šç»“æ„è¿”å›å³å¯ã€‚å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œéœ€è¦æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

### åªèƒ½åœ¨ Nextjs ä¸­ä½¿ç”¨å—ï¼Ÿ

ä¸æ˜¯çš„ã€‚NEXT-FAST-TABLE æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¯ä»¥åœ¨ä»»ä½• React é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒä½¿ç”¨äº† Server Actionï¼Œæ‰€ä»¥åœ¨å…¶ä»–æ¡†æ¶ä¸­ä½¿ç”¨æ—¶ï¼Œéœ€è¦è‡ªè¡Œå®ç°æ•°æ®è·å–ã€‚

### ä¸ºä»€ä¹ˆä½¿ç”¨ NextUI è€Œä¸æ˜¯å…¶ä»– UI åº“ï¼Ÿ

NextUI æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ UI åº“ï¼Œæä¾›äº†ä¸°å¯Œçš„ç»„ä»¶å’Œä¸»é¢˜ï¼Œå¯ä»¥å¿«é€Ÿæ­å»ºé¡µé¢ã€‚æœ¬é¡¹ç›®é‡ç‚¹å…³æ³¨å…¨æ ˆå¼€å‘è€…çš„ä½¿ç”¨ä½“éªŒï¼Œå¹¶ä¸”æä¾›äº†ååˆ†ä¼˜ç§€çš„è§¦æ‘¸åé¦ˆï¼Œé€‚åˆç§»åŠ¨ç«¯ä½¿ç”¨ã€‚æˆ‘ä»¬å…³æ³¨äºç®€å•ä¸”æè‡´çš„æ“ä½œä½“éªŒï¼Œè€Œ NextUI æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚

## è´¡çŒ®å’Œæ”¯æŒ

æ¬¢è¿è´¡çŒ®ä»£ç å’Œæäº¤é—®é¢˜ã€‚æ‚¨å¯ä»¥åœ¨ [GitHub ä»“åº“](https://github.com/Haiananan/next-fast-table) æäº¤ Pull Request æˆ– Issueã€‚

æœ¬åœ°è¿è¡Œé¡¹ç›®ï¼š

```bash
git clone https://github.com/Haiananan/next-fast-table.git
pnpm install
cd package
pnpm install
cd ..
pnpm dev
```

æ‰“åŒ…ï¼š

```bash
cd package
pnpm build
```

## License

æœ¬é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ã€‚è¯·æŸ¥çœ‹ [LICENSE](./LICENSE) æ–‡ä»¶è·å–æ›´å¤šä¿¡æ¯ã€‚
